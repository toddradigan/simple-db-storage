<link rel='import' href='../polymer/polymer.html'>
<link rel='import' href='../simple-db/simple-db.html'>
<link rel='import' href='../simple-db/simple-db-worker.js'>

<script>
  (function() {
    'use strict';

    Polymer.SimpleDBDatabaseBehavior = {
      properties: {
        dbName: {
          type: String
        },

        db: {
          type: Object,
          computed: '_computeDb(dbName, _workerUrl)',
          notify: true,
        },

        _workerUrl: {
          type: String,
          value: function() {
            return this.resolveUrl('../simple-db/simple-db-worker.js');
          }
        }
      },

      _computeDb: function(name, url) {
        if (!name) {
          return null;
        }

        var options = {
          auto_compaction: true
        };

        return new SimpleDB(name, url);
      }
    };
  })();
</script>
